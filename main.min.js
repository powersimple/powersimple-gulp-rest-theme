var increment="vw",orientation="vertical",_w=jQuery(window).width(),_h=jQuery(window).height(),aspect=_w/_h,current_notch=0;function initSite(){null==menu&&window.setTimeout(initSite(),100);var e="wheel-menu",t=location.hash="#about";setSlider(e),setSlides(e),setSlideShow("wheel-menu"),makeWheelNav("outer-nav",menu_levels,wheel_nav_params),""!=location.hash?(t=location.hash.replace("#",""),setSliderNotch(slug_nav[t])):menu_config[e].menu_type,setSliderNotch(slug_nav[t]),initMatrix()}function calibrateCircle(e,t,n){jQuery(e).css("width",t+n),jQuery(e).css("height",t+n),jQuery(e).css("margin-left",t/2*-1+n),jQuery(e).css("margin-top",t/2*-1+n)}function positionNavElements(){_h<=_w?(orientation="vertical",slider_left=_w/2+.8*_h/2+_w/10+"px",1<aspect&&aspect<1.25?jQuery("#slider-wrap, #related").addClass("narrow"):jQuery("#slider-wrap, #related").removeClass("narrow"),jQuery("#slider-wrap, #related").addClass("vertical"),jQuery("#slider-wrap, #related").removeClass("horizontal")):(orientation="horizontal",slider_top=_h/2+.8*_w/2+24+"px",aspect<1&&.75<aspect?jQuery("#slider-wrap, #related").addClass("narrow"):jQuery("#slider-wrap, #related").removeClass("narrow"),jQuery("#slider-wrap, #related").addClass("horizontal"),jQuery("#slider-wrap, #related").removeClass("vertical"))}function positionProjector(){var e=50,t="20vw",n="20vw";1.15<aspect&&aspect<1.5?(e=100*(aspect-1)+"%",n=t="10vw",fontSize=1.2):.5<aspect&&aspect<=1.15?(e="20%",n=t="15vw",fontSize=1):1.5<=aspect&&(e="50%",n=t="20vw",fontSize=1.5),jQuery("#featured-image-wrap").css("top",e),jQuery("#featured-image-wrap").css("width",t),jQuery("#featured-image-wrap").css("height",n),jQuery("#featured-image-header").css("fontSize",fontSize+"em"),jQuery("#featured-image-footer").css("fontSize",.8*fontSize+"em")}function logoSize(){}function reposition_screen(){jQuery("#main").css("height","100vw"),jQuery("#main").css("width","100vh"),setSlider("wheel-menu"),positionProjector(),positionNavElements(),logoSize(),jQuery("#slider").css("visibility","visible");for(var e=[{id:".phi-centered",size:61.8,increment:"vw"},{id:"#outer-ring",size:80,increment:"vw"},{id:"#inner-ring",size:72,increment:"vw"},{id:"#inner-subring",size:65,increment:"vw"}],t=0;t<e.length;t++){var n=e[t];_h<_w?("vw"==n.increment&&(n.increment="vh"),calibrateCircle(n.id,n.size,n.increment),jQuery(".slick-track").css("height","61.8vh")):(calibrateCircle(n.id,n.size,n.increment),jQuery(".slick-track").css("height","61.8vw"))}jQuery("#stars").css("height","100vh"),jQuery("#stars").css("width","100vw")}function setSlideContent(e,t){console.log("setSlideContent",e,t),null!=posts[t]&&(jQuery("#slide"+e+" h2").html(posts[t].title),jQuery("#slide"+e+" section div.content").html(posts[t].content),$carousel.slick("slickGoTo",e))}function setText(){"undefined"!=typeof languages?state.language==languages.default?page_title=posts[state.post_id].title+" | "+site_title:(page_title=retreiveML("posts","title",state.post_id,state.language),console.log("new page title "+page_title)):page_title=posts[state.post_id].title+" | "+site_title,document.title=page_title}function setContent(e,t,n){state.slide=posts_nav[t];posts[t].featured_media;if(null!=posts[t]){state.post_id=t,setText(),setImage(posts[t].featured_media,"#featured-image","square");uploads_path,posts[t].featured_video.video_path;setVideo(posts[t].featured_video.video_id,"#bg-video"),setRelated(posts[t]),0<posts[t].screen_images.length?setScreenImages(posts[t].screen_images,"#screen-image","circleViewer"):jQuery("#screen-image-container").html("")}setSlideContent(e,t)}jQuery(document).ready(function(){jQuery(".wheelnav-outer-nav-title").css("display:none;"),reposition_screen()}),jQuery(window).resize(function(){_w=jQuery(window).width(),_h=jQuery(window).height(),increment=_h<_w?"vh":"vw",aspect=_w/_h,reposition_screen()});var photoCount=0,pieceCount=0,onPhoto=0,pieceCompleteCount=0,transitions=["center","random"],transitionType=0,viewerDest=null;function circleViewer(e){photoCount=state.screen_images.length,pieceCount=state.screen_images.length,console.log("CIRCLE VIEWER PRELOAD",e,state.screen_images,pieceCount),viewerDest=e;for(var t=0;t<state.screen_images.length;t++)jQuery("#preload").append('<img src="'+state.screen_images[t].src+'">');jQuery(window).load(function(){}),loadCircleViewer(e)}function loadCircleViewer(e,t){jQuery(e+"-container").html("");for(var n=0;n<state.screen_images.length;n++){var i=(100-100/pieceCount*n)/100*100,a=100+(100-i)/i*100,s=100/pieceCount*n/2;jQuery(e+"-container").append('<div class="section" id="piece'+n+'" style="top: '+s+"%; left: "+s+"%; width: "+i+"%; height: "+i+"%; background-size:"+a+"%; background-image: url("+state.screen_images[n].src+')"></div>')}nextSlide()}function nextSlide(){clearInterval(state.circle_delay),pieceCompleteCount=0,photoCount<=++onPhoto&&(onPhoto=0);for(var e=0;e<state.screen_images.length;e++){var t=0,n=360,i=jQuery("#piece"+e),a=state.screen_images[e];switch(transitions[transitionType]){case"random":t=Math.random()/2,n=360*Math.random();break;case"center":t=(pieceCount-e)/10,n=181}TweenMax.to(i,1,{delay:t,directionalRotation:n+"_long",onComplete:completeRotation,onCompleteParams:[i,a],ease:Power4.easeIn})}}function completeRotation(e,t){e.css("background-image","url("+t.src+")"),TweenMax.to(e,2,{directionalRotation:"0_short",onComplete:finishPieceanimation,ease:Elastic.easeOut})}function finishPieceanimation(){++pieceCompleteCount==pieceCount&&(state.circle_delay=setInterval(nextSlide,1e3))}!function(a){var i=function(e,t,n){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"},this.setting=a.extend(this.setting,t),"string"!=typeof t.axis||"x"!==t.axis.toLowerCase()&&"y"!==t.axis.toLowerCase()||(this.setting.axis=t.axis.toLowerCase()),"boolean"==typeof t.reverse&&(this.setting.reverse=t.reverse),"string"==typeof t.trigger&&(this.setting.trigger=t.trigger.toLowerCase());var i=parseInt(t.speed);isNaN(i)||(this.setting.speed=i),"boolean"==typeof t.forceHeight&&(this.setting.forceHeight=t.forceHeight),"boolean"==typeof t.forceWidth&&(this.setting.forceWidth=t.forceWidth),"boolean"==typeof t.autoSize&&(this.setting.autoSize=t.autoSize),("string"==typeof t.front||t.front instanceof a)&&(this.setting.front=t.front),("string"==typeof t.back||t.back instanceof a)&&(this.setting.back=t.back),this.element=e,this.frontElement=this.getFrontElement(),this.backElement=this.getBackElement(),this.isFlipped=!1,this.init(n)};a.extend(i.prototype,{flipDone:function(e){var t=this;t.element.one(function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),function(){t.element.trigger("flip:done"),"function"==typeof e&&e.call(t.element)})},flip:function(e){if(!this.isFlipped){this.isFlipped=!0;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}),this.backElement.css({transform:t+"(0deg)","z-index":"1"}),this.flipDone(e)}},unflip:function(e){if(this.isFlipped){this.isFlipped=!1;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+"(0deg)","z-index":"1"}),this.backElement.css({transform:t+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),this.flipDone(e)}},getFrontElement:function(){return this.setting.front instanceof a?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof a?this.setting.back:this.element.find(this.setting.back)},init:function(t){var n=this,i=n.frontElement.add(n.backElement),e="rotate"+n.setting.axis,a={perspective:2*n.element["outer"+("rotatex"===e?"Height":"Width")](),position:"relative"},s={transform:e+"("+(n.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},r={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};n.setting.forceHeight?i.outerHeight(n.element.height()):n.setting.autoSize&&(r.height="100%"),n.setting.forceWidth?i.outerWidth(n.element.width()):n.setting.autoSize&&(r.width="100%"),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(a["-webkit-transform-style"]="preserve-3d"),i.css(r).find("*").css({"backface-visibility":"hidden"}),n.element.css(a),n.backElement.css(s),setTimeout(function(){var e=n.setting.speed/1e3||.5;i.css({transition:"all "+e+"s ease-out"}),"function"==typeof t&&t.call(n.element)},20),n.attachEvents()},clickHandler:function(e){e||(e=window.event),this.element.find(a(e.target).closest('button, a, input[type="submit"]')).length||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var e=this;e.element.off("mouseleave.flip"),e.flip(),setTimeout(function(){e.element.on("mouseleave.flip",a.proxy(e.unflip,e)),e.element.is(":hover")||e.unflip()},e.setting.speed+150)},attachEvents:function(){var e=this;"click"===e.setting.trigger?e.element.on(a.fn.tap?"tap.flip":"click.flip",a.proxy(e.clickHandler,e)):"hover"===e.setting.trigger&&(e.element.on("mouseenter.flip",a.proxy(e.hoverHandler,e)),e.element.on("mouseleave.flip",a.proxy(e.unflip,e)))},flipChanged:function(e){this.element.trigger("flip:change"),"function"==typeof e&&e.call(this.element)},changeSettings:function(e,t){var n=this,i=!1;if(void 0!==e.axis&&n.setting.axis!==e.axis.toLowerCase()&&(n.setting.axis=e.axis.toLowerCase(),i=!0),void 0!==e.reverse&&n.setting.reverse!==e.reverse&&(n.setting.reverse=e.reverse,i=!0),i){var a=n.frontElement.add(n.backElement),s=a.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);a.css({transition:"none"});var r="rotate"+n.setting.axis;n.isFlipped?n.frontElement.css({transform:r+(n.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):n.backElement.css({transform:r+(n.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout(function(){a.css(s),n.flipChanged(t)},0)}else n.flipChanged(t)}}),a.fn.flip=function(t,n){return"function"==typeof t&&(n=t),"string"==typeof t||"boolean"==typeof t?this.each(function(){var e=a(this).data("flip-model");"toggle"===t&&(t=!e.isFlipped),t?e.flip(n):e.unflip(n)}):this.each(function(){if(a(this).data("flip-model")){var e=a(this).data("flip-model");!t||void 0===t.axis&&void 0===t.reverse||e.changeSettings(t,n)}else a(this).data("flip-model",new i(a(this),t||{},n))}),this}}(jQuery);var posts={},taxonomies={},categories={},tags={},menus={},media={},posts_nav={},posts_slug_ids={},slug_nav={},data_nav=[],last_dest="outer-nav",menu_levels=[],menu_slides=[],related={},state={},data_score=7,data_loaded=[];function getStaticJSON(e,i,a){var t=json_path+e+".json";jQuery.ajax({url:t,data:"",success:function(e,t,n){return i(e,a)},error:function(e,t,n){},cache:!1})}function setPosts(e){var t="post";if(Array.isArray(e))for(var n=0;n<e.length;n++)void 0!==e[n].title&&void 0!==e[n].title.rendered&&(e[n].title=e[n].title.rendered),void 0!==e[n].content&&void 0!==e[n].content.rendered&&(e[n].content=e[n].content.rendered),void 0!==e[n].type&&(t=e[n].type,posts[e[n].id]=e[n]);else t=e.type,posts[e.id]=e;if(void 0!==t)switch(t){case t="project":case t="post":case t="page":}return console.log("posts",posts),posts}getStaticJSON("posts",setPosts),getStaticJSON("pages",setPosts),getStaticJSON("project",setPosts),getStaticJSON("categories",setCategories),getStaticJSON("tags",setTags),getStaticJSON("menus",setMenus),getStaticJSON("media",setMedia);var columns,drops,drawnToBottom,canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d"),fontSize=18,chars=generateChars();function generateChars(){for(var e="0123456789",t=0;t<=55;t++)e+=String.fromCharCode(t+65382);return e.split("")}function initMatrix(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,columns=Math.round(canvas.width/fontSize),drops=[];for(var e=0;e<columns;e++)drops[e]=1;drawnToBottom=!1}function draw(){ctx.fillStyle="rgba(0, 0, 0, 0.05)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#19FF19",ctx.font="bold "+fontSize+"px monospace";for(var e=drops.length,t=chars.length,n=0;n<e;n++){var i=chars[Math.floor(Math.random()*t)],a=drops[n]*fontSize;ctx.fillText(i,n*fontSize,a),a>canvas.height&&(drawnToBottom=!0),(!drawnToBottom&&.925<Math.random()||drawnToBottom&&.95<Math.random())&&(drops[n]=0),drops[n]++}}function setMedia(e){for(var t=0;t<e.length;t++)media[e[t].id]=e[t].data}function setImage(e,t,n){if(setMediaText(e,t),console.log("set image",e,n,media[e]),null!=media[e]){jQuery(t+"-wrap").attr("visibility","hidden");var i=uploads_path+media[e].path,a=media[e].file;return jQuery(t+"-wrap").css("visibility","visible"),"image/svg+xml"==media[e].mime||(a="square"==n?getSquareVersion(media[e].meta.sizes,t):media[e].meta.sizes[n]),""==t||(jQuery(t).attr("src",i+a),setMediaText(e,t)),i+a}jQuery(t+"-wrap").css("visibility","hidden")}function setFeatured(e,t){if(null!=posts[e]&&(console.log("setFeatured",e,t),0<posts[e].featured_media))return setImage(posts[e].featured_media,"",t)}function wrapTag(e,t){return"<"+e+">"+t+"</"+e+">"}function setMediaText(e,t){null!=media[e]?(jQuery(t+"-title").html(media[e].title),jQuery(t+"-caption").html(media[e].caption),jQuery(t+"-description").html(media[e].desc),jQuery(t).attr("alt",media[e].alt)):(jQuery(t+"-title").html(""),jQuery(t+"-caption").html(""),jQuery(t+"-description").html(""),jQuery(t).attr("alt",""))}function getSquareVersion(e,t){return box={w:jQuery(t+"-container").width(),h:jQuery(t+"-container").height()},1280<box.w||1280<box.h?e["sq-lg"]:(250<box.w||250<box.h)&&(box.w<=1280||box.h<=1280)?e["sq-med"]:e["sq-sm"]}function setVideo(e,t){if(null!=media[e]){var n=uploads_path+media[e].path,i=media[e].file;jQuery(t+" video source").attr("src",n+i);jQuery(t).css("display","block"),jQuery(t+" video")[0].load(),jQuery(t+" video source").attr("src",n+i)}else jQuery(t).css("display","none")}function setScreenImages(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push({src:setImage(e[a],"#screen-image","square"),data:media[e[a]]});state.screen_images=i}window.onresize=function(){initMatrix()},setInterval(draw,160);var menu_config={"wheel-menu":{menu_type:"wheel",location:"#outer-nav"}};function setMenus(e,t){for(var n=0;n<e.length;n++)menus[e[n].slug]={},menus[e[n].slug].menu_array=[],menus[e[n].slug].name=e[n].name,menus[e[n].slug].slug=e[n].slug,menus[e[n].slug].items=setMenu(e[n].slug,e[n].items);buildMenuData(),initSite()}function setMenu(e,t){menu={};for(var n=0;n<t.length;n++)menu[t[n].ID]=setMenuItem(e,t[n]),0!=t[n].menu_item_parent&&menu[t[n].menu_item_parent].children.push(t[n].ID),menus[e].menu_array.push(menu[t[n].ID]);return menu}function setMenuItem(e,t){return this_item={},this_item.menu_id=t.ID,this_item.title=t.title,this_item.menu_order=t.menu_order,this_item.object=t.object,this_item.object_id=t.object_id,this_item.parent=t.menu_item_parent,this_item.slug=e,this_item.children=[],this_item}function menu_order(e,t){return e.menu_order<t.menu_order?-1:e.menu_order>t.menu_order?1:0}function setLinearNav(e){for(var t in menus[e].linear_nav=[],menus[e].items)menus[e].items[t].slug=posts[menus[e].items[t].object_id].slug,id=menus[e].items[t].object_id,menus[e].linear_nav.push(menus[e].items[t]),0;menus[e].linear_nav.sort(menu_order),console.log("linear_nav",menus[e].linear_nav),console.log("posts_nav",posts_nav)}function setLinearDataNav(e){for(var t=0,n=0,i=0,a=0,s="outer-nav",r=0;r<e.length;r++){s="outer-nav",e[r].dest=s,e[r].slice=n,i=e[r].notch=t,data_nav.push(e[r]),slug_nav[e[r].slug]=t,t++;for(var o=0;o<e[r].children.length;o++){e[r].children[o].dest="inner-nav",e[r].children[o].slice=o,e[r].children[o].notch=t,e[r].children[o].parent=i,a=t,data_nav.push(e[r].children[o]),slug_nav[e[r].children[o].slug]=t,t++;for(var l=0;l<e[r].children[o].children.length;l++)e[r].children[o].children[l].dest="inner-subnav",e[r].children[o].children[l].slice=l,e[r].children[o].children[l].notch=t,e[r].children[o].children[l].grandparent=i,e[r].children[o].children[l].parent=a,data_nav.push(e[r].children[o].children[l]),slug_nav[e[r].children[o].children[l].slug]=t,t++}n++}}function buildMenuData(){if(null==posts)window.setTimeout(buildMenuData(),10);else{var e=[];for(var t in menus)if(null!=menu_config[t]){for(var n in menu_array=[],menus[t].items)0==menus[t].items[n].parent&&menu_array.push(menus[t].items[n]);menu_array.sort(menu_order);for(var i=[],a=0;a<menu_array.length;a++){i=[];for(var s=0;s<menu_array[a].children.length;s++){for(var r=[],o=menus[t].items[menu_array[a].children[s]].children,l=0;l<o.length;l++)r.push({title:menus[t].items[o[l]].title,slug:posts[menus[t].items[o[l]].object_id].slug,object:menus[t].items[o[l]].object,object_id:menus[t].items[o[l]].object_id});i.push({title:menus[t].items[menu_array[a].children[s]].title,slug:posts[menus[t].items[menu_array[a].children[s]].object_id].slug,object:menus[t].items[menu_array[a].children[s]].object,object_id:menus[t].items[menu_array[a].children[s]].object_id,children:r})}e.push({title:menu_array[a].title,slug:posts[menu_array[a].object_id].slug,object:menu_array[a].object,object_id:menu_array[a].object_id,children:i})}setLinearDataNav(menu_levels=e),setLinearNav("wheel-menu")}}}function psConsole(){}function setRelated(e){var t=null;(related={}).cats={},related.tags={};var n={cats:categories,tags:tags};for(var i in related)for(var a=0;a<e[i].length;a++)for(var s=0;s<n[i][e[i][a]].posts.length;s++)if(t=n[i][e[i][a]].posts[s],e.id!=t&&null!=posts[t]){var r=posts[t].type;null==related[i][r]&&(related[i][r]=[]),related[i][r].push(t)}delete n,displayRelated()}function displayRelated(){for(var e in jQuery("#related").html(""),rel_list="",related){for(var t in rel_list+='<ul class="'+e+'">',related[e])for(var n=0;n<related[e][t].length;n++){post_id=related[e][t][n];var i="",a=setFeatured(post_id,"thumbnail");""!=a&&(i=' style="background-image:url('+a+')"'),rel_list+="<li "+i+' class="ui-widget '+t+'" data-rel="'+post_id+'">',rel_list+=post_id,rel_list+="</li>"}rel_list+="</ul>"}jQuery("#related").html(rel_list)}function tipHoverContent(e){var t="";return"project"==posts[e].type&&(t+='<span class="hover-title">'+posts[e].project_info.client+"</span>",""!=posts[e].project_info.agency&&(t+='<span class="hover-sub">'+posts[e].project_info.agency+"</span>")),t}function selectRelatedPost(e){"project"==posts[e].type&&setSliderNotch(1)}!function(a){a(document).tooltip({items:"[data-rel]",content:function(){var e=a(this).data("rel"),t="",n="",i=setFeatured(e,"thumbnail");return""!=i&&(n=' style="background-image:url('+i+')"'),a(this).on("click",function(){selectRelatedPost(e)}).on("mouseover",function(){}).on("mouseout",function(){}).on("mousedown",function(){}).on("mouseup",function(){}),t+='<div class="rel-tooltip"'+n+">",t+=tipHoverContent(e),t+="</div>"}})}(jQuery);var gotoslide=function(e){setSlideContent(notch,menus["wheel-menu"].linear_nav[e].object_id),$(".slideshow").slickGoTo(parseInt(e))};function setSlideShow(e){jQuery(".slideshow").slick({dots:!1,arrows:!0,infinite:!0,speed:1e3,fade:!0,cssEase:"linear",focusoOnSelect:!0})}function setSlide(e,t){return e='\n<div><div id="slide'+e+'" data-id="'+t+'" class="slide-wrap">',e+="\n\t<h2></h2>",e+='\n\t<div class="img-wrap"></div>',e+='\n\t<section><div class="content"></div></section>',e+="\n</div></div>\n"}function setSlides(e){var t="0",n="";if(null==posts)window.setTimeout(setSlides(e),100);else{for(i=0;menus[e].linear_nav[i];i++)t=menus[e].linear_nav[i].object_id.toString(),n+=setSlide(i,t);jQuery("#article").html(n)}}jQuery(".slick-dots li button").on("click",function(e){e.stopPropagation()});var $carousel=jQuery(".slideshow");function setSlider(e){"undefined"!==menus[e]&&(jQuery("#slider").slider({orientation:orientation,range:"max",min:0,max:menus[e].linear_nav.length,value:0,slide:function(e,t){setSliderNotch(t.value)}}),jQuery(".slick-dots li button").on("click",function(e){e.stopPropagation()}))}function setSliderNotch(e){null!=state.circle_delay&&clearInterval(state.circle_delay),location.hash=posts[data_nav[e].object_id].slug,jQuery("#slider").slider("value",e),null!=menus["wheel-menu"].linear_nav[e]&&(setContent(e,data_nav[e].object_id,data_nav[e].object),triggerWheelNav(e)),current_notch=e}jQuery(document).on("keydown",function(e){37==e.keyCode&&$carousel.slick("slickPrev"),39==e.keyCode&&$carousel.slick("slickNext")}),jQuery("a[data-slide]").click(function(e){e.preventDefault();var t=jQuery(this).data("slide");setSlideContent(notch,menus["wheel-menu"].linear_nav[t].object_id)}),function(i){i("div.arrow").on("click",function(e){e.stopPropagation();var t=i(this).attr("id"),n=current_notch;"down-arrow"==t?0==n?n=menus["wheel-menu"].linear_nav.length-1:n--:"up-arrow"==t&&(n==menus["wheel-menu"].linear_nav.length-1?n=0:n++),setSliderNotch(n)})}(jQuery);var camera,scene,renderer,stars=[];function init(){(camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3)).position.z=5,scene=new THREE.Scene,(renderer=new THREE.WebGLRenderer).setSize(window.innerWidth,window.innerHeight),jQuery("#stars").append(renderer.domElement)}function addSphere(){for(var e=-1e3;e<1e3;e+=20){var t=new THREE.SphereGeometry(.5,32,32),n=new THREE.MeshBasicMaterial({color:16777215}),i=new THREE.Mesh(t,n);i.position.x=1e3*Math.random()-500,i.position.y=1e3*Math.random()-500,i.position.z=e,i.scale.x=i.scale.y=2,scene.add(i),stars.push(i)}}function animateStars(){for(var e=0;e<stars.length;e++)star=stars[e],star.position.z+=e/10,1e3<star.position.z&&(star.position.z-=2e3)}function render(){requestAnimationFrame(render),renderer.render(scene,camera),animateStars()}function setChildCategories(e){for(var t=0;t<e.length;t++)categories[e[t].id]=e[t];return e}function setCategories(e){for(var t=0;t<e.length;t++)categories[e[t].id]=e[t];return e}function setTags(e){for(var t=0;t<e.length;t++)tags[e[t].id]=e[t];return e}init(),addSphere(),render(),jQuery(window).on("resize",function(){renderer.setSize(window.innerWidth,window.innerHeight)});var wheel_nav_params={maxPercent:1,min:.91,max:1,sel_min:.91,sel_max:1},inner_nav_params={maxPercent:1,min:.91,max:1,sel_min:.91,sel_max:1},inner_subnav_params={maxPercent:1,min:.9,max:1,sel_min:.9,sel_max:1},last_outer_notch=0,last_inner_notch=0,menu_raphael={},wheels={};function makeWheelNav(e,t,n){"outer-nav"==e?(child_dest="inner-nav",child_params=inner_nav_params):"inner-nav"==e&&(child_dest="inner-subnav",child_params=wheel_nav_params);var i=[],a=[];for(wheels[e]=new wheelnav(e),wheels[e].spreaderEnable=!1,wheels[e].cssMode=!0,wheels[e].navAngle=270,wheels[e].selectedNavItem=2,wheels[e].selectedNavItemIndex=null,wheels[e].maxPercent=n.maxPercent,wheels[e].slicePathFunction=slicePath().DonutSlice,wheels[e].slicePathCustom=slicePath().PieSliceCustomization(),wheels[e].slicePathCustom.minRadiusPercent=n.min,wheels[e].slicePathCustom.maxRadiusPercent=n.max,wheels[e].sliceSelectedPathCustom=slicePath().PieSliceCustomization(),wheels[e].sliceSelectedPathCustom.minRadiusPercent=n.sel_min,wheels[e].sliceSelectedPathCustom.maxRadiusPercent=n.sel_max,wheels[e].titleSelectedAttr={},o=0;o<t.length;o++)i.push(t[o].title),a.push(t[o].id);wheels[e].initWheel(i);var s=360/wheels[e].navItemCount,r=90;for(o=0;o<wheels[e].navItemCount;o++)wheels[e].navItems[o].titleRotateAngle=r,r=s+(90-s);"outer-nav"==e&&0<t[0].children.length&&makeWheelNav("inner-nav",t[0].children,wheel_nav_params),wheels[e].createWheel();for(var o=counter=0;o<wheels[e].navItemCount;o++)wheels[e].navItems[o].data=t[o],wheels[e].navItems[o].navigateFunction=function(){jQuery("#slider").slider("option","value",this.data.notch),setSliderNotch(slug_nav[this.data.slug])};menu_raphael[e]=wheels[e].raphael,reposition_screen()}function triggerWheelNav(e){var t=data_nav[e],n=t.dest;"outer-nav"==n?(null!=wheels["inner-nav"]&&wheels[n].navigateWheel(t.slice),popAWheelie("inner-nav"),0<t.children.length&&makeWheelNav("inner-nav",t.children,inner_nav_params),last_outer_notch=e):"inner-nav"==n?(last_outer_notch!=t.parent?(wheels["outer-nav"].navigateWheel(data_nav[t.parent].slice),makeWheelNav("inner-nav",data_nav[t.parent].children,wheel_nav_params),wheels[n].navigateWheel(t.slice),last_outer_notch=t.parent):(wheels["outer-nav"].navigateWheel(data_nav[t.parent].slice),null!=wheels["inner-nav"]?(wheels[n].navigateWheel(t.slice),null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()):(makeWheelNav("inner-nav",data_nav[t.parent].children,wheel_nav_params),wheels[n].navigateWheel(t.slice)),0<t.children.length?makeWheelNav("inner-subnav",t.children,wheel_nav_params):popAWheelie("inner-subnav")),last_inner_notch=e):"inner-subnav"==n&&(last_outer_notch!=t.grandparent&&(wheels["outer-nav"].navigateWheel(data_nav[t.grandparent].slice),last_outer_notch=t.grandparent),last_inner_notch!=t.parent?(wheels["inner-nav"].navigateWheel(data_nav[t.parent].slice),makeWheelNav("inner-subnav",data_nav[t.parent].children,inner_nav_params),wheels["inner-subnav"].navigateWheel(t.slice),last_inner_notch=t.parent):null==wheels["inner-subnav"]?makeWheelNav("inner-subnav",t.children,inner_nav_params):wheels[n].navigateWheel(t.slice)),last_dest=n}function popAWheelie(e){"outer-nav"==e?null!=wheels["inner-nav"]&&(wheels["inner-nav"].raphael.remove(),null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()):"inner-nav"==e&&null!=wheels["inner-subnav"]&&wheels["inner-subnav"].raphael.remove()}function initLanguageMenu(e){console.log("languages",languages),state.language=languages.default;var t="<ul>";for(var n in languages)if("default"!=n){var i="";n==state.language&&(i=' class="active-language"'),t+='<li id="'+n+'"'+i+">"+languages[n].native+"</li>"}jQuery(e).on("click","li",function(e){for(var t in state.language=jQuery(this).attr("id"),languages)t==state.language?(t!=languages.default&&null==languages[t].data&&(console.log("fetch language for the first time ",t),getStaticJSON(t,setLanguage,t)),changeLanguage(state.language=t),jQuery("#"+t).addClass("active-language")):jQuery("#"+t).removeClass("active-language")}),jQuery(e).html(t)}function retreiveML(e,t,n,i){if("posts"==e){if(null!=posts[n].languages&&null!=posts[n].languages[i]){var a=posts[n].languages[i].id;return posts[a][t]}return posts[n][t]}}function setLanguage(e,t){for(var n in languages[t].data=e)"page"!=e[n].type&&"post"!=e[n].type&&"project"!=e[n].type||(posts[n]=e[n]);changeLanguage(t)}function changeLanguage(e){}"undefined"!=typeof languages&&initLanguageMenu("#language-menu");